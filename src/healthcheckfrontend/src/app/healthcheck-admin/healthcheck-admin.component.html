<div class="container-fluid">
 <h5><span class="badge badge-secondary">Add Healthcheck Information</span></h5>
  <form #newhcdetail="ngForm" (ngSubmit)="addHealthcheck(newhcdetail)">
    <div class="form-row pb-2">
      <div class="col-3">
        <div class="btn-group dropdown">
          <button type="button" class="btn btn-secondary">Select Project</button>
          <select class = "custom-select" name="projectName" id="envId" 
          [(ngModel)]="editingHealthCheck.projectName" required >
            <option *ngFor="let projectName of projects" [value]="projectName.projectName">{{projectName.projectName}}</option>
          </select>
        </div>
      </div>
      <div class="col-3">
        <div class="btn-group dropdown">
          <button type="button" class="btn btn-secondary">Select Environment</button>
          <select class = "custom-select" id="envId" name="envName" [(ngModel)]="editingHealthCheck.envName" required >
            <option *ngFor="let envName of envTypes" [value]="envName">{{envName}}</option>
          </select>
        </div>
      </div>
      <div class="col-3">
        <input type="text" class="form-control" id="componentName" name="componentName" ngModel placeholder="Component Name" [(ngModel)]="editingHealthCheck.componentName">
      </div>
    </div>
    <div class="form-row pb-2">
      <div class="col-3">
        <input name="ipAddress" type="text" class="form-control" id="ipAddress" ngModel placeholder="IP Address" [(ngModel)]="editingHealthCheck.ipAddress">
      </div>
      <div class="col-3">
        <input type="text" class="form-control" name="applicationPort" id="applicationPort" ngModel placeholder="Application Port" [(ngModel)]="editingHealthCheck.applicationPort">
      </div>
      <div class="col-3">
        <input type="text" class="form-control" name="healthCheckPort" id="healthCheckPort" ngModel placeholder="HealthCheck Port" [(ngModel)]="editingHealthCheck.healthCheckPort">
      </div>      
    </div>
    <div class="form-row pb-2">
      <div class="col-3">
        <input type="text" class="form-control" name ="healthCheckUrl" id="healthCheckUrl" ngModel placeholder="Healthcheck URL" [(ngModel)]="editingHealthCheck.healthCheckUrl">
      </div>
      <div class="col-3">
        <input type="text" class="form-control" name ="createdBy" id="createdBy" ngModel placeholder="Created by" [(ngModel)]="editingHealthCheck.createdBy">
      </div>
    </div>
    <div class="form-row pb-2">
      <div class="col-3">
        <button
        class="btn btn-primary listing-button"
        type="submit"
        ng-show="addListing"
        *ngIf="!editing">Add
      </button>
      <button
        class="btn btn-primary listing-button"
        type="button"
        (click)="updateHealthCheck(editingHealthCheck)"
        ng-show="addListing"
        *ngIf="editing">Save
      </button>
     <button
        class="btn btn-primary listing-button"
        type="button"
        (click)="clearEditing()"
        ng-show="addListing">
        Clear
      </button>
    </div>

  </div>
</form>
</div>

<hr>
<div class="btn-group dropdown pt-5 pb-3">
  <button type="button" class="btn btn-secondary">Select Application Environment</button>
  <select class = "custom-select" name="envType" id="envId" [ngModel]="selectedEnv" required (ngModelChange)="getHealthChecks($event)">  
    <option *ngFor="let envType of envTypes" [value]="envType">{{envType}}</option>
  </select>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Project Name</th>
      <th>Enviornment Name</th>
      <th>Component Name</th>
      <th>IP Address</th>
      <th>Application Port</th>
      <th>Healthcheck Port</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngIf="filteredHealthCheck.length == 0">
      <tr scope="row">
        <td>NO DATA FOUND</td>
      </tr>
    </ng-container>
    <ng-container>
      <tr scope="row" *ngFor="let healthcheck of filteredHealthCheck" >
        <td>{{healthcheck.projectName}}</td>
        <td>{{healthcheck.envName}}</td>
        <td>{{healthcheck.componentName}}</td>
        <td>{{healthcheck.ipAddress}}</td>
        <td>{{healthcheck.applicationPort}}</td>
        <td>{{healthcheck.healthCheckPort}}</td>
        <td><a (click)="editHealthCheck(healthcheck)"><i class="docScroller material-icons edit">edit</i></a></td>
        <td><a (click)="deleteHealthcheckData(healthcheck.healthCheckId)"><i class="material-icons">delete</i></a></td>
      </tr>
    </ng-container>
  </tbody>
</table>